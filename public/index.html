<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­äºŒç—…ä¹Ÿè¦æ‰“æ‰‹æªï¼</title>

    <!-- live-Serverä¸‹ä½¿ç”¨çš„è·¯å¾„-->
    <script type="importmap">
    {
      "imports": {
        "js-yaml": "../node_modules/js-yaml/dist/js-yaml.mjs",
        "@sfirew/minecraft-motd-parser": "../node_modules/@sfirew/minecraft-motd-parser/dist/index.mjs"
      }
    }
    </script>
    <!-- NodeJSç¯å¢ƒä¸‹ä½¿ç”¨çš„è·¯å¾„ -->
    <!-- <script type="importmap">
    {
      "imports": {
        "js-yaml": "/node_modules/js-yaml/dist/js-yaml.mjs"
      }
    }
    </script> -->

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="changeBoxCSS.css">
    <link rel="stylesheet" href="select.css">
    <script type="module" src="editLogic.js"></script>
    <script type="module" src="script.js"></script>
</head>

<body>
    <div class="headpng">
        <img class="headmiku" src="miku.jpg" alt="æˆ‘å–œæ¬¢ä½  â¤">
    </div>

    <div style="flex-direction: row; display: flex; justify-content: center; align-items: center; width: 100%;">
      <div class="card">
          <h1>Trmèœå•å…ƒç´ å¯è§†åŒ–</h1>
          <p>ğŸ“åœ¨è¿™é‡Œè¾“å…¥é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯é’ˆå¯¹èœå•çš„å…‘æ¢ç‰©å“ç‰¹åŒ–å–”</p>
          <textarea id="trmText" name="trmElem" placeholder="åœ¨è¿™é‡Œè¾“å…¥é…ç½®æ–‡ä»¶..." class="TrmInput"></textarea>

          <!-- æŒ‰é’®åœ¨è¿™é‡Œ -->
          <button id="myButton" class="action-btn">ç‚¹æˆ‘è¿›è¡Œå¤„ç† âœ¨</button>
      </div>

      <div class="card" id="outputCard" hidden="true">
          <img id="pixelIcon" class="pixel-icon" style="cursor: pointer;" src="https://assets.mcasset.cloud/1.20.1/assets/minecraft/textures/item/barrier.png" alt="ç‰©å“å›¾æ ‡" />
          
          <div class="outputContainer">
            <button class="nav-btn prev" id="prevBtn">â®</button>
            <div id="outputBox" style="text-align: left;width: 100%;margin: 10px;" >
              <div id="errMessage" hidden></div>
              <div style="text-align: center; color: #ccc; font-size: 14px;">ç‚¹å‡»å›¾æ ‡æŸ¥çœ‹è¯¦æƒ…</div>
              <!-- <div id="itemName" style="text-align: center;"></div>
              <div id="itemLore" style="white-space: pre-wrap; margin-top: 10px;"></div> -->
            </div>
            <button class="nav-btn next" id="nextBtn">â¯</button>
          </div>

      </div>
    </div>

    <!-- ä¿®æ”¹ç»„ä»¶ -->
    <!-- é»˜è®¤ hiddenï¼Œç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®åæ‰ä¼šæ˜¾ç¤º -->
    <div id="advancedPanel" hidden style="flex-direction: row; display: flex; justify-content: center; align-items: stretch; width: 100%; flex-wrap: wrap; margin-top: 20px;">
        
        <!-- ç»„ä»¶ Aï¼šä¿®æ”¹æ“ä½œ -->
        <div id="changeBoxA" class="card" style="display: flex; flex-direction: column; flex: 1; min-width: 400px;">
            <h2>ğŸ› ï¸ ä¿®æ”¹ </h2>
            
            <h3 style="display:block; margin: 20px; color:#ffffff; text-align: center;" id="currentItemName">ä»€ä¹ˆéƒ½æ²¡æœ‰å“Ÿï¼Ÿ</h3>
            
            <!-- ABC åŒºåŸŸ -->
            <div class="control-row">
                <!-- A: åˆ é™¤æŒ‰é’® -->
                <button id="delPropBtn" class="action-btn small-btn delete-btn" title="åˆ é™¤å½“å‰é€‰ä¸­çš„æ¡ä»¶">ğŸ—‘ï¸</button>
                
                <!-- B: é€‰æ‹©å±æ€§ (Select ç»„ä»¶) -->
                <div style="flex: 1; margin: 0 10px; display: flex; flex-direction: column;">
                    <div class="select-modern-wrapper">
                        <select id="propSelect" class="select-modern">
                            <!-- åŠ¨æ€æ·»åŠ  Option -->
                        </select>
                    </div>
                    <!-- ç±»å‹æ˜¾ç¤ºå°ç»„ä»¶ -->
                    <div id="propTypeDisplay" class="prop-type-label">Type: Unknown</div>
                </div>

                <!-- C: ä¿å­˜æŒ‰é’® -->
                <button id="savePropBtn" class="action-btn small-btn save-btn" title="ä¿å­˜ä¿®æ”¹å›å¯¹è±¡">ğŸ’¾</button>
            </div>
            
            <!-- S2: å¯é€‰ç»„ä»¶ (Select) -->
            <div id="conditionSelectWrapper" class="select-modern-wrapper" hidden style="margin-top: 10px; width: 100%;">
                <select id="conditionSelect" class="select-modern" style="width: 100%;">
                    <!-- åŠ¨æ€è§£æå‡ºçš„æ¡ä»¶ -->
                </select>
            </div>

            <!-- D2: å±•ç¤º/ä¿®æ”¹æ–‡æœ¬ç»„ä»¶ -->
            <div id="detailEditor" class="editor-box">
                <p id="emptyDetailTip" style="margin: 0; color: #aaa;">æœªè§£æåˆ°ææ–™éœ€æ±‚</p>
                
                <div id="detailForm" hidden>
                    <div class="editor-field">
                        <label>ç±»å‹ (Type)</label>
                        <select id="editType" class="editor-select"></select>
                    </div>
                    <div class="editor-field">
                        <label>ææ–™åç§° (Name)</label>
                        <input id="editName" class="editor-input">
                    </div>
                    <div>
                        <label>ææ–™é”®å (Key)</label>
                        <input id="editKey" class="editor-input">
                    </div>
                     <div class="editor-field">
                        <label>æ¡ä»¶ (Amount/Value)</label>
                        <input id="editAmount" class="editor-input" type="number">
                    </div>
                    <div class="editor-field">
                        <label>åŸå§‹é€»è¾‘ (Logic)</label>
                        <input id="editLogic" class="editor-input" readonly style="font-size: 10px; opacity: 0.7;">
                    </div>
                </div>
            </div>

            <!-- å¢åŠ æŒ‰é’® -->
            <div style="margin-top: auto; padding-top: 20px;">
              <button id="plusCondition" class="action-btn" style="background-color: #fda085; width: 100%;">â• æ·»åŠ æ–°æ¡ä»¶</button>
            </div>
        </div>

        <!-- ç»„ä»¶ Bï¼šç»“æœå¯¼å‡º -->
        <div id="changeBoxB" class="card" style="flex: 1; min-width: 300px;">
            <h2>ğŸ› ï¸ ç»“æœå¯¼å‡º </h2>
            <p>ä¸¥æ ¼ç¼©è¿›çš„ YAML ç»“æœ</p>
            <textarea id="yamlOutput" class="TrmInput" style="height: 250px; font-family: 'JetBrains Mono', monospace;" readonly placeholder="ç­‰å¾…ç”Ÿæˆ..."></textarea>
        </div>

    </div>
    <div class="footer">
        &copy; 2025 ä¸­äºŒç—…ä¹Ÿè¦æ‰“æ‰‹æªï¼
    </div>
    
    <!-- æ–°å¢ï¼šå…¨å±è¯¦æƒ…å¼¹çª—ç»„ä»¶å–µ -->
    <div id="detailOverlay" hidden>
        <div class="detail-content card">
            <h3 style="margin-bottom: 20px; color: #bbb;">ç‰©å“è¯¦æƒ…é¢„è§ˆ</h3>
            <div id="itemName" style="text-align: center; font-size: 1.5em; margin-bottom: 15px;"></div>
            <div class="lore-scroll-container">
                <div id="itemLore" style="white-space: pre-wrap; text-align: left;"></div>
            </div>
            <p style="margin-top: 20px; font-size: 12px; color: #aaa;">(å†æ¬¡ç‚¹å‡»ä»»æ„ç©ºç™½å¤„å…³é—­å–µ)</p>
        </div>
    </div>

</body>

</html>